---
import type { languagesList } from '@/i18n/ui';
import { useTranslations } from '@/i18n/utils';

const currentLang = Astro.currentLocale ?? 'es';
const t = useTranslations(currentLang as keyof typeof languagesList);
---

<div id="popup" class="popup">
	<div class="popup-content">
		<p>âœ… {t('email.template.success-01')}</p>
		<p>{t('email.template.success-02')}</p>
		<button id="close-popup">{t('email.template.cerrar')}</button>
	</div>
</div>

<script is:inline>
	window.addEventListener('DOMContentLoaded', () => {
		const urlParams = new URLSearchParams(window.location.search);
		if (urlParams.get('sent') === 'true') {
			document.getElementById('popup')?.classList.add('visible');
		}

		const btn = document.getElementById('close-popup');
		if (btn) {
			btn.addEventListener('click', () => {
				document.getElementById('popup')?.classList.remove('visible');

				const url = new URL(window.location.href);
				url.searchParams.delete('sent');
				window.history.replaceState({}, '', url);
			});
		}
	});
</script>

<style>
	.popup {
		display: none;
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: rgba(0, 0, 0, 0.4);
		align-items: center;
		justify-content: center;
		z-index: 1000;
	}

	.popup.visible {
		display: flex;
	}

	.popup-content {
		background: #fff;
		padding: 2rem;
		border-radius: 8px;
		text-align: center;
		box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
	}

	button {
		margin-top: 1rem;
		padding: 0.5rem 1.2rem;
		background-color: #77b255;
		color: white;
		border: none;
		border-radius: 4px;
		cursor: p;
	}
</style>
